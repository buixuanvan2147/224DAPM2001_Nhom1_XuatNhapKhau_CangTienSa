@{
    ViewBag.Title = "Index_QuanTriVien";
    Layout = "~/Views/Shared/_LayoutQuanTriVien.cshtml";
}



<!-- Tiêu đề + Thời gian thực -->
<div style="margin-bottom: 25px; color: #4a5568; font-size: 0.95rem; font-weight: 500; display: flex; align-items: center; justify-content: space-between;">
    <h2 style="margin: 0; color: #2d3748; font-size: 2rem; font-weight: 700;">Trang Quản Trị</h2>
    <div style="border-bottom: 2px solid #2a2d3e;">Cập nhật lần cuối: <span id="currentTime">@DateTime.Now.ToString("HH:mm, dd/MM/yyyy")</span></div>
</div>

<!-- Thống kê nhanh -->
<div style="display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 30px;">
    <div style="flex: 1 1 220px; background-color: #2a2d3e; padding: 20px; border-radius: 12px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.05); transition: transform 0.3s ease, box-shadow 0.3s ease; border: 1px solid #e2e8f0;">
        <h4 style="margin-bottom: 12px; color: #2b6cb0; font-size: 1.1rem; font-weight: 600;">Tài khoản Khách Hàng</h4>
        <p style="font-size: 1.8rem; font-weight: 700; color: #2b6cb0; margin: 0; line-height: 1;">@ViewBag.TongSoTaiKhoanKhachHang</p>
        <a href="@Url.Action("QuanLyTaiKhoan_QuanTriVien", "QuanTriVien")" style="color: #2b6cb0; text-decoration: none; font-size: 0.9rem; font-weight: 500; transition: all 0.3s ease;" onmouseover="this.style.color='#e2e8f0'; this.style.textDecoration='underline';" onmouseout="this.style.color='#2b6cb0'; this.style.textDecoration='none';">Xem chi tiết</a>
    </div>
    <div style="flex: 1 1 220px; background-color: #2a2d3e; padding: 20px; border-radius: 12px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.05); transition: transform 0.3s ease, box-shadow 0.3s ease; border: 1px solid #e2e8f0;">
        <h4 style="margin-bottom: 12px; color: #805ad5; font-size: 1.1rem; font-weight: 600;">Tài Khoản Nhân Viên</h4>
        <p style="font-size: 1.8rem; font-weight: 700; color: #805ad5; margin: 0; line-height: 1;">@ViewBag.TongSoTaiKhoanNhanVien</p>
        <a href="@Url.Action("QuanLyTaiKhoan_QuanTriVien", "QuanTriVien")" style="color: #805ad5; text-decoration: none; font-size: 0.9rem; font-weight: 500; transition: all 0.3s ease;" onmouseover="this.style.color='#e2e8f0'; this.style.textDecoration='underline';" onmouseout="this.style.color='#2b6cb0'; this.style.textDecoration='none';">Xem chi tiết</a>
    </div>
    <div style="flex: 1 1 220px; background-color: #2a2d3e; padding: 20px; border-radius: 12px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.05); transition: transform 0.3s ease, box-shadow 0.3s ease; border: 1px solid #e2e8f0;">
        <h4 style="margin-bottom: 12px; color: #48bb78; font-size: 1.1rem; font-weight: 600;">Tài Khoản Chờ Duyệt</h4>
        <p style="font-size: 1.8rem; font-weight: 700; color: #48bb78; margin: 0; line-height: 1;">@ViewBag.TongSoKhachHangChoDuyet</p>
        <a href="@Url.Action("QuanLyTaiKhoan_QuanTriVien", "QuanTriVien")" style="color: #48bb78; text-decoration: none; font-size: 0.9rem; font-weight: 500; transition: all 0.3s ease;" onmouseover="this.style.color='#e2e8f0'; this.style.textDecoration='underline';" onmouseout="this.style.color='#2b6cb0'; this.style.textDecoration='none';">Xem chi tiết</a>
    </div>
    <div style="flex: 1 1 220px; background-color: #2a2d3e; padding: 20px; border-radius: 12px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.05); transition: transform 0.3s ease, box-shadow 0.3s ease; border: 1px solid #e2e8f0;">
        <h4 style="margin-bottom: 12px; color: #d69e2e; font-size: 1.1rem; font-weight: 600;">Đơn Hàng Đang Xử Lý</h4>
        <p style="font-size: 1.8rem; font-weight: 700; color: #d69e2e; margin: 0; line-height: 1;">@ViewBag.TongSoDonHangDangXuLy</p>
        <a href="@Url.Action("QuanLyDonHang_QuanTriVien", "QuanTriVien")" style="color: #d69e2e; text-decoration: none; font-size: 0.9rem; font-weight: 500; transition: all 0.3s ease;" onmouseover="this.style.color='#e2e8f0'; this.style.textDecoration='underline';" onmouseout="this.style.color='#2b6cb0'; this.style.textDecoration='none';">Xem chi tiết</a>
    </div>
</div>

<!-- Thông báo -->
<div style="margin-bottom: 30px; background-color: #2a2d3e; padding: 20px; border-radius: 12px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.05); border: 1px solid #e2e8f0;">
    <h4 style="margin-bottom: 15px; color: #ffffff; font-size: 1.1rem; font-weight: 600;">Thông Báo</h4>
    <ul style="padding-left: 20px; color: #ffffff; font-size: 0.95rem; line-height: 1.6;">
        <li><span></span> @ViewBag.TongSoKhachHangChoDuyet tài khoản khách hàng đang chờ duyệt.</li>
        <li><span></span> 3 đơn hàng trễ hạn cần xử lý.</li>
        <li><span></span> Kho số 2 sắp đạt giới hạn sức chứa (90%).</li>    
    </ul>
</div>

<!-- Biểu đồ -->
<div style="margin-bottom: 70px; background-color: #2a2d3e; padding: 20px; border-radius: 12px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.05);  border: 1px solid #e2e8f0;">
    <div style="margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; color: #ffffff; font-size: 1.1rem; font-weight: 600;">
        <h4 style="margin: 0; color: #ffffff;">Biểu Đồ Doanh Thu (7 Ngày Qua)</h4>
        <a href="@Url.Action("ThongKeBaoCao_QuanTriVien", "QuanTriVien")" style="color: #90cdf4; text-decoration: underline; font-size: 0.95rem;">Xem Chi Tiết</a>
    </div>
    <canvas id="revenueChart" style="height: 350px; width: 100%; border-radius: 8px; padding: 10px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); max-height: 300px; overflow: hidden;"></canvas>
</div>



<style>
     a:hover {
        color: #e2e8f0; /* Thay đổi màu khi hover thành xám nhạt */
        text-decoration: underline; /* Thêm gạch chân khi hover */
    }
</style>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        $(document).ready(function () {
            // Cập nhật thời gian thực
            setInterval(() => {
                $('#currentTime').text(new Date().toLocaleString('vi-VN', {
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric',
                    hour12: false
                }));
            }, 1000);

            // Khởi tạo biểu đồ
            const ctx = document.getElementById('revenueChart').getContext('2d');
            const gradient = ctx.createLinearGradient(0, 0, 0, 350);
            gradient.addColorStop(0, 'rgba(43, 108, 176, 0.6)');
            gradient.addColorStop(1, 'rgba(43, 108, 176, 0.1)');

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['13/05', '14/05', '15/05', '16/05', '17/05', '18/05', '19/05'],
                    datasets: [{
                        label: 'Doanh Thu ($)',
                        data: [2000, 2500, 2200, 2800, 3000, 2700, 3250],
                        borderColor: '#2b6cb0',
                        backgroundColor: gradient,
                        fill: true,
                        tension: 0.4,
                        borderWidth: 3,
                        pointBackgroundColor: '#2b6cb0',
                        pointBorderColor: '#ffffff',
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        pointHoverBackgroundColor: '#ffffff',
                        pointHoverBorderColor: '#2b6cb0'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            labels: {
                                color: '#ffffff',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                },
                                padding: 15
                            }
                        },
                        tooltip: {
                            backgroundColor: '#2a2d3e',
                            titleColor: '#ffffff',
                            bodyColor: '#e2e8f0',
                            borderColor: '#2b6cb0',
                            borderWidth: 2,
                            cornerRadius: 8,
                            padding: 15,
                            caretSize: 6
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: '#ffffff',
                                font: {
                                    size: 12
                                }
                            },
                            grid: {
                                color: 'rgba(226, 232, 240, 0.2)',
                                borderColor: '#e2e8f0'
                            }
                        },
                        y: {
                            ticks: {
                                color: '#ffffff',
                                font: {
                                    size: 12
                                },
                                callback: function (value) { return '$' + value; }
                            },
                            grid: {
                                color: 'rgba(226, 232, 240, 0.2)',
                                borderDash: [5, 5],
                                borderColor: '#e2e8f0'
                            },
                            beginAtZero: true
                        }
                    },
                    hover: {
                        mode: 'nearest',
                        intersect: true
                    }
                }
            });
        });
    </script>
}